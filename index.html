<!DOCTYPE html>
<html lang="fr">
<head>
  <meta name="google-site-verification" content="QyuGZszlrYeU3dKPc9lI0I1Gy2Zs4uNvdPlwDJILLsc" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Réservation de cours en ligne – Maths, SC.Physique, Anglais | G-Cours</title>

  <meta name="description" content="Plateforme de réservation de cours en ligne en maths, anglais et physique. Choisissez un créneau disponible et réservez facilement avec G-Cours.">

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "EducationalOrganization",
    "name": "J-Cours",
    "description": "Plateforme de réservation de cours en ligne en maths, anglais et physique.",
    "url": "https://j-cour.github.io/reservation/"
  }
  </script>

  <style>
:root {
  --bleu-marine: #0a1f3d;
  --bleu-marine-clair: #1a3a5f;
  --gris-fer: #6b7280;
  --gris-clair: #e5e7eb;
  --blanc: #ffffff;
  --accent: #3b82f6;
  --radius: 14px;
  --shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
}

* { box-sizing: border-box; } 

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  background: var(--gris-clair);
  color: var(--bleu-marine);
}

/* NAV */
nav {
  background: var(--bleu-marine);
  padding: 20px 0;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  position: sticky;
  top: 0;
  z-index: 1000;
}

.nav-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.logo {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--blanc);
  text-decoration: none;
}

.logo span {
  color: var(--accent);
}

.menu {
  display: flex;
  list-style: none;
  margin: 0;
  padding: 0;
  gap: 35px;
}

.menu li a {
  color: var(--blanc);
  text-decoration: none;
  font-weight: 500;
  transition: color 0.3s ease;
  font-size: 1rem;
}

.menu li a:hover,
.menu li a.active {
  color: var(--accent);
}

/* LE RESTE EST STRICTEMENT IDENTIQUE */

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  text-align: center;
}

p { text-align: center; color: var(--gris-fer); }

.container {
  max-width: 900px;
  margin: auto;
  padding: 20px;
}

input, select {
  padding: 14px 16px;
  width: 100%;
  margin: 12px 0;
  border-radius: var(--radius);
  border: 1.5px solid var(--gris-fer);
  background: var(--blanc);
  color: var(--bleu-marine);
}

.slot {
  background: var(--blanc);
  padding: 18px 20px;
  margin: 14px 0;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  display: flex;
  justify-content: space-between;
  border-left: 6px solid var(--accent);
}

.full { opacity: 0.6; }

button {
  padding: 10px 18px;
  border: none;
  border-radius: 999px;
  cursor: pointer;
  background: var(--bleu-marine);
  color: var(--blanc);
  font-weight: 600;
}

button:hover {
  background: var(--accent);
  color: var(--blanc);
}

button:disabled {
  background: var(--gris-fer);
  color: var(--blanc);
}

#admin {
  margin-top: 40px;
  background: var(--blanc);
  padding: 25px;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 20px;
}

th {
  background: var(--bleu-marine);
  color: var(--blanc);
  padding: 14px;
}

td {
  border-bottom: 1px solid var(--gris-clair);
  padding: 12px;
  text-align: center;
}

@media (max-width: 768px) {
  .nav-container {
    flex-direction: column;
    gap: 20px;
  }
  
  .menu {
    gap: 20px;
  }
}
  </style>
    <link rel="icon" type="image/png" href="favicon.png">
</head>

<body>

<nav>
  <div class="nav-container">
    <a href="./index.html" class="logo">G-<span>Cours</span></a>
    <ul class="menu">
      <li><a href="index.html">Accueil</a></li>
      <li><a href="reservation.html" class="active">Réservation</a></li>
      <li><a href="a-propos.html">À propos</a></li>
      <li><a href="Tarifs.html">Tarifs</a></li>
    </ul>
  </div>
</nav>

<div class="container">

  <h1>Réservation de cours en ligne – Maths, SC.Physique, Anglais</h1>

  <p>7 places maximum par créneau</p>

  <p>
    Cette plateforme permet de réserver des cours en ligne en maths, Physique et Anglais
    Les élèves choisissent un créneau disponible et s'inscrivent facilement.
    Chaque créneau est limité à 7 places afin de garantir un suivi de qualité.
  </p>

  <input id="name" placeholder="Prénom et nom de l'élève" />

  <select id="subject">
    <option value="">Choisir la matière</option>
    <option value="Maths">Maths</option>
    <option value="Anglais">Anglais</option>
    <option value="Physique">Physique</option>
  </select>

  <div id="slots"></div>

  <div style="text-align:center;margin-top:20px;">
    <button onclick="openAdmin()">Accès Prof</button>
  </div>

  <div id="admin"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCDJRbeW9KWrLzuI3v2kBUDulKcb3REKy8",
  authDomain: "reservation-cour.firebaseapp.com",
  projectId: "reservation-cour",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const slots = [
  "Lundi 17-19","Lundi 19-21",
  "Mardi 17-19","Mardi 19-21",
  "Jeudi 17-19","Jeudi 19-21",
  "Mercredi 14-16","Mercredi 16-17",
  "Dimanche 9-11","Dimanche 11-13"
];

const MAX = 7;
const P = atob("MjgwNQ==");

let data = {};
let isAdmin = false;

async function loadData(){
  for(const slot of slots){
    const snap = await getDoc(doc(db,"reservations",slot));
    data[slot] = snap.exists() ? snap.data().students : [];
  }
  render();
}

async function saveSlot(slot){
  await setDoc(doc(db,"reservations",slot),{
    students: data[slot]
  });
}

window.openAdmin = function(){
  const pass = prompt("Mot de passe prof");
  if (pass !== P) return alert("Mot de passe incorrect");

  isAdmin = true;
  document.getElementById("admin").innerHTML = `
    <h2>Emploi du temps (Prof)</h2>
    <table>
      <thead>
        <tr><th>Créneau</th><th>Élèves inscrits</th></tr>
      </thead>
      <tbody id="adminTable"></tbody>
    </table>
  `;
  render();
};

function render(){
  const slotsDiv = document.getElementById("slots");
  slotsDiv.innerHTML = "";

  const adminTable = document.getElementById("adminTable");
  if(adminTable) adminTable.innerHTML = "";

  slots.forEach(slot=>{
    const count = data[slot].length;

    const div = document.createElement("div");
    div.className = "slot"+(count>=MAX?" full":"");

    div.innerHTML =
      `<strong>${slot}</strong>` +
      (isAdmin ? `<br>${count}/${MAX} places` : ``);

    const btn = document.createElement("button");
    btn.textContent = "Réserver";
    btn.disabled = count>=MAX;
    btn.onclick = ()=>reserve(slot);

    div.appendChild(btn);
    slotsDiv.appendChild(div);

    if(isAdmin && adminTable){
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${slot}</td>
        <td>
          ${data[slot].map((s,i)=>
            `${s.name} (${s.subject})
            <button onclick="removeStudent('${slot}',${i})">❌</button>`
          ).join("<br>")}
        </td>
      `;
      adminTable.appendChild(tr);
    }
  });
}

async function reserve(slot){
  const name = document.getElementById("name").value.trim();
  const subject = document.getElementById("subject").value;

  if(!name) return alert("Entre ton prénom");
  if(!subject) return alert("Choisis une matière");

  const alreadyBooked = data[slot].some(
    s => s.name.toLowerCase() === name.toLowerCase()
  );

  if(alreadyBooked){
    return alert("Tu es déjà inscrit sur ce créneau.");
  }

  data[slot].push({ name, subject });
  await saveSlot(slot);
  render();

  const message = encodeURIComponent(
    `Bonjour,\nNouvelle réservation G-Cours\n\nNom : ${name}\nMatière : ${subject}\nCréneau : ${slot}`
  );

  window.location.href = `sms:0619336183?body=${message}`;
}

window.removeStudent = async function(slot,index){
  if(!confirm("Supprimer cet élève ?")) return;
  data[slot].splice(index,1);
  await saveSlot(slot);
  render();
}

loadData();
</script>

</body>
</html>
